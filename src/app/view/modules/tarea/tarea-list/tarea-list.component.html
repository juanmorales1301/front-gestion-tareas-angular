<div class="container mt-5 pb-5">
    @if(!cambiEdit){
        <app-tarea-edit [tarea]="selectedTarea"></app-tarea-edit>
    }

    <h2 class="mb-4 pt-5">Lista de Tareas</h2>

    <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>

    <div class="table-responsive">
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef> ID </th>
                <td mat-cell *matCellDef="let tarea"> {{ tarea.id }} </td>
            </ng-container>

            <ng-container matColumnDef="titulo">
                <th mat-header-cell *matHeaderCellDef> Título </th>
                <td mat-cell *matCellDef="let tarea"> {{ tarea.titulo }} </td>
            </ng-container>

            <ng-container matColumnDef="descripcion">
                <th mat-header-cell *matHeaderCellDef> Descripción </th>
                <td mat-cell *matCellDef="let tarea"> {{ tarea.descripcion }} </td>
            </ng-container>

            <ng-container matColumnDef="fecha_creacion">
                <th mat-header-cell *matHeaderCellDef> Fecha Creación </th>
                <td mat-cell *matCellDef="let tarea"> {{ tarea.fecha_creacion | date }} </td>
            </ng-container>

            <ng-container matColumnDef="fecha_inicio">
                <th mat-header-cell *matHeaderCellDef> Fecha Inicio </th>
                <td mat-cell *matCellDef="let tarea"> {{ tarea.fecha_inicio | date }} </td>
            </ng-container>

            <ng-container matColumnDef="fecha_vencimiento">
                <th mat-header-cell *matHeaderCellDef> Fecha Vencimiento </th>
                <td mat-cell *matCellDef="let tarea"> {{ tarea.fecha_vencimiento | date }} </td>
            </ng-container>

            <ng-container matColumnDef="prioridad">
                <th mat-header-cell *matHeaderCellDef> Prioridad </th>
                <td mat-cell *matCellDef="let tarea"> {{ tarea.prioridad }} </td>
            </ng-container>

            <ng-container matColumnDef="usuario_asignado">
                <th mat-header-cell *matHeaderCellDef> Usuario Asignado </th>
                <td mat-cell *matCellDef="let tarea"> {{ tarea.usuario_asignado }} </td>
            </ng-container>

            <ng-container matColumnDef="categoria">
                <th mat-header-cell *matHeaderCellDef> Categoría </th>
                <td mat-cell *matCellDef="let tarea"> {{ tarea.categoria }} </td>
            </ng-container>

            <ng-container matColumnDef="tiempo_estimado">
                <th mat-header-cell *matHeaderCellDef> Tiempo Estimado </th>
                <td mat-cell *matCellDef="let tarea"> {{ tarea.tiempo_estimado }} </td>
            </ng-container>

            <ng-container matColumnDef="tags">
                <th mat-header-cell *matHeaderCellDef> Tags </th>
                <td mat-cell *matCellDef="let tarea"> {{ tarea.tags }} </td>
            </ng-container>

            <ng-container matColumnDef="estado">
                <th mat-header-cell *matHeaderCellDef> Estado </th>
                <td mat-cell *matCellDef="let tarea"> {{ tarea.estado }} </td>
            </ng-container>

            <ng-container matColumnDef="acciones">
                <th mat-header-cell *matHeaderCellDef> Acciones </th>
                <td mat-cell *matCellDef="let tarea">
                    <button class="btn btn-primary" (click)="onEdit(tarea)">Editar</button>
                    <button class="btn btn-danger" (click)="onDelete(tarea.id)">Eliminar</button>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>
</div>